@page "/user/login"
@inherits EventEaseAppBase
@inject NavigationManager NavigationManager
@inject IJSRuntime JS
<h3>Update Session State</h3>

<EditForm Model="@User" OnValidSubmit="@UpdateSession">
    <FluentValidationValidator />
    <ValidationSummary />

    <div>
        <label>Name:</label>
        <InputText @bind-Value="User.Name" class="form-control" />
    </div>

    <div>
        <label>Email:</label>
        <InputText @bind-Value="User.Email" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary">Save</button>
</EditForm>

@code {

    private async Task UpdateSession()
    {
        User.LastActive = DateTime.UtcNow;
        User.IsAuthenticated = true;
        User.AttendedEvents.Clear();

        await JS.InvokeVoidAsync("goBack");
    }
}
<script>
    window.goBack = () => history.back();
</script>